(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[1],{

/***/ "./node_modules/css-loader/index.js!./node_modules/sass-loader/dist/cjs.js!./src/styles.scss":
/*!******************************************************************************************!*\
  !*** ./node_modules/css-loader!./node_modules/sass-loader/dist/cjs.js!./src/styles.scss ***!
  \******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("exports = module.exports = __webpack_require__(/*! ../node_modules/css-loader/lib/css-base.js */ \"./node_modules/css-loader/lib/css-base.js\")(false);\n// imports\nexports.push([module.i, \"@import url(https://fonts.googleapis.com/css?family=Inconsolata);\", \"\"]);\nexports.push([module.i, \"@import url(https://fonts.googleapis.com/css?family=Josefin+Slab);\", \"\"]);\n\n// module\nexports.push([module.i, \"html,\\nbutton,\\nselect {\\n  font-family: \\\"Inconsolata\\\", monospace;\\n  color: #1b2228; }\\n\\nbutton,\\n#select-rom-button {\\n  box-sizing: border-box;\\n  border: 1px solid #a72e2b;\\n  border-radius: 3px;\\n  box-shadow: inset inset 0 0 0 1px #dae4ed;\\n  padding: 5px 20px;\\n  font-size: 18px;\\n  text-transform: uppercase;\\n  color: #a72e2b;\\n  background: #fff;\\n  transition: 50ms background; }\\n  button:hover,\\n  #select-rom-button:hover {\\n    box-sizing: border-box;\\n    border: 1px solid #a72e2b;\\n    background: #a72e2b;\\n    color: #fff;\\n    cursor: pointer; }\\n  button:disabled,\\n  #select-rom-button:disabled {\\n    cursor: auto;\\n    color: #758aa0;\\n    box-sizing: border-box;\\n    border: 1px solid #dae4ed; }\\n    button:disabled:hover,\\n    #select-rom-button:disabled:hover {\\n      box-sizing: border-box;\\n      border: 1px solid #dae4ed;\\n      background: #fff;\\n      cursor: auto; }\\n\\na.styled-link {\\n  text-decoration: underline;\\n  color: #6a1d1b;\\n  padding-right: 2px;\\n  transition: all 0.5s;\\n  display: inline-block; }\\n  a.styled-link:hover {\\n    background-color: rgba(106, 29, 27, 0.1); }\\n\\nspan.emphasis {\\n  color: #6a1d1b;\\n  font-weight: bold; }\\n\\n#header {\\n  text-align: center;\\n  display: inline-block;\\n  position: relative;\\n  margin-left: 50%;\\n  margin-bottom: 25px;\\n  -webkit-transform: translateX(-50%);\\n  -moz-transform: translateX(-50%);\\n  -ms-transform: translateX(-50%);\\n  -o-transform: translateX(-50%);\\n  transform: translateX(-50%);\\n  font-family: \\\"Josefin Slab\\\", serif;\\n  font-size: 60px;\\n  padding: 30px 20px 25px 20px;\\n  box-sizing: border-box;\\n  border-bottom: 3px solid #6a1d1b; }\\n\\n#description {\\n  font-size: 20px;\\n  text-align: justify;\\n  width: 600px;\\n  margin-left: 50%;\\n  margin-bottom: 40px;\\n  -webkit-transform: translateX(-50%);\\n  -moz-transform: translateX(-50%);\\n  -ms-transform: translateX(-50%);\\n  -o-transform: translateX(-50%);\\n  transform: translateX(-50%);\\n  position: relative; }\\n\\n#menu-buttons {\\n  text-align: center;\\n  position: relative; }\\n\\n#rom-input {\\n  width: 0;\\n  height: 0;\\n  overflow: hidden;\\n  z-index: -1;\\n  opacity: 0; }\\n\\n#neso-canvas {\\n  display: block;\\n  border: 1px solid #758aa0;\\n  margin: 30px auto; }\\n\", \"\"]);\n\n// exports\n\n\n//# sourceURL=webpack:///./src/styles.scss?./node_modules/css-loader!./node_modules/sass-loader/dist/cjs.js");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var neso_neso_bg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! neso/neso_bg */ \"./node_modules/neso/neso_bg.wasm\");\n/* harmony import */ var neso__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! neso */ \"./node_modules/neso/neso.js\");\n/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./styles.scss */ \"./src/styles.scss\");\n/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\nconst SCREEN_WIDTH = 256;\nconst SCREEN_HEIGHT = 240;\nconst SAMPLE_FREQ = 44100;\nconst nes = neso__WEBPACK_IMPORTED_MODULE_1__[\"Nes\"].new(SAMPLE_FREQ);\nlet isRunning = false;\nlet powerOn = false;\n\nconst canvas = document.getElementById('neso-canvas');\ncanvas.width = SCREEN_WIDTH * 2;\ncanvas.height = SCREEN_HEIGHT * 2;\nconst canvasContext = canvas.getContext('2d');\nconst audioContext = new AudioContext();\n\n// User Input\nconst KEYS = [80, 79, 16, 13, 87, 83, 65, 68];\n\ndocument.addEventListener('keydown', (event) => {\n  const index = KEYS.indexOf(event.keyCode);\n  if (index !== -1) {\n    nes.press_button(0, index);\n    nes.press_button(1, index);\n  }\n});\n\ndocument.addEventListener('keyup', (event) => {\n  const index = KEYS.indexOf(event.keyCode);\n  if (index !== -1) {\n    nes.release_button(0, index);\n    nes.release_button(1, index);\n  }\n});\n\n// User Interface\nconst updateScreen = () => {\n  const imageBufferPtr = nes.image_buffer();\n  const imageBuffer = new Uint8ClampedArray(\n    neso_neso_bg__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer,\n    imageBufferPtr,\n    SCREEN_WIDTH * SCREEN_HEIGHT * 4,\n  );\n  const imageData = new ImageData(imageBuffer, SCREEN_WIDTH, SCREEN_HEIGHT);\n  canvasContext.putImageData(imageData, 0, 0);\n  canvasContext.drawImage(\n    canvas,\n    0,\n    0,\n    SCREEN_WIDTH,\n    SCREEN_HEIGHT,\n    0,\n    0,\n    SCREEN_WIDTH * 2,\n    SCREEN_HEIGHT * 2,\n  );\n};\n\nconst updateAudio = () => {\n  const audioBufferPtr = nes.audio_buffer();\n  const audioBuffer = new Float32Array(neso_neso_bg__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer, audioBufferPtr, nes.audio_buffer_len());\n  const buffer = audioContext.createBuffer(1, nes.audio_buffer_len(), 44100);\n  const bsn = audioContext.createBufferSource();\n\n  buffer.copyToChannel(audioBuffer, 0, 0);\n  bsn.connect(audioContext.destination);\n  bsn.buffer = buffer;\n  bsn.start();\n};\n\nconst render = () => {\n  if (isRunning) {\n    nes.step_frame();\n    updateScreen();\n    updateAudio();\n    window.requestAnimationFrame(render);\n  }\n};\n\nconst startButton = document.getElementById('start-button');\nconst stopButton = document.getElementById('stop-button');\nconst loadButton = document.getElementById('load-button');\nconst romInput = document.getElementById('rom-input');\nconst romLabel = document.getElementById('select-rom-button');\nstartButton.disabled = true;\nstopButton.disabled = true;\n\nconst start = () => {\n  startButton.disabled = true;\n  stopButton.disabled = false;\n  isRunning = true;\n  render();\n};\n\nconst stop = () => {\n  stopButton.disabled = true;\n  startButton.disabled = false;\n  isRunning = false;\n};\n\nconst load = () => {\n  if (romInput.files.length === 0) {\n    alert('No ROM selected.');\n    return;\n  }\n\n  stop();\n  const rom = romInput.files[0];\n  const fileReader = new FileReader();\n  fileReader.readAsArrayBuffer(rom);\n  fileReader.onload = () => {\n    nes.load_rom(new Uint8Array(fileReader.result));\n    if (powerOn) {\n      nes.reset();\n    }\n    powerOn = true;\n  };\n};\n\nconst onRomChange = (event) => {\n  const fileName = event.target.value.split('\\\\').pop();\n  if (fileName) {\n    romLabel.innerHTML = fileName;\n  } else {\n    romLabel.innerHTML = 'Select Rom';\n  }\n};\n\nstartButton.addEventListener('click', start);\nstopButton.addEventListener('click', stop);\nloadButton.addEventListener('click', load);\nromInput.addEventListener('change', onRomChange);\n\n\n//# sourceURL=webpack:///./src/index.js?");

/***/ }),

/***/ "./src/styles.scss":
/*!*************************!*\
  !*** ./src/styles.scss ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("\nvar content = __webpack_require__(/*! !../node_modules/css-loader!../node_modules/sass-loader/dist/cjs.js!./styles.scss */ \"./node_modules/css-loader/index.js!./node_modules/sass-loader/dist/cjs.js!./src/styles.scss\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../node_modules/style-loader/lib/addStyles.js */ \"./node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n//# sourceURL=webpack:///./src/styles.scss?");

/***/ })

}]);